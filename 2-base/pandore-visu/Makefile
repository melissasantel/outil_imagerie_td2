## Makefile PANDORE
##  
##-----------------------------------------------------------
## DO NOT EDIT BY HAND
## Autogenerated by ./configure.
## If something is wrong, fix ./configure and run it again. 
##-----------------------------------------------------------
##
## GREYC - IMAGE
## 6, boulevard Maréchal Juin 14050 CAEN.
##

RM           = rm -f
AR           = ar 
ARFLAGS      = lrcv
CXX          = g++
CXXFLAGS     =  -s -DNDEBUG -O2 -Iinclude -pedantic
CXXFLAGSOBJ  = $(CXXFLAGS) -fpic
CXXFLAGSOP   = $(CXXFLAGS) -DMAIN -Isrc/operatorsP*
LD           = g++
LDFLAGSLIB   =  -shared
LDFLAGSOP    =  -Llib -lpandore 
PERL         = perl
PPP          = perl -Ietc/macros etc/macros/template.pl etc/macros/pand_macros
MAKE         = make
COPY         = cp -f
INSTALL_FILE = $(COPY)
INSTALL_DIR  = $(COPY) -R
LN_S         = ln -sf

OBJ= src/objects/bundled.o src/objects/collection.o src/objects/errc.o src/objects/graph.o src/objects/main.o src/objects/pobject.o src/objects/region.o
OPERS= \
	bin/pvisu \
	bin/pdraw

# Avoid removing intermediates files.
.PRECIOUS: %.cpp

.IGNORE:

.PHONY: all clean cleandist distclean lib opers

DYN_LIB= lib/libpandore.so
STATIC_LIB= lib/libpandore.a
TARGETS= $(LIB) $(OPERS)

all: lib opers

lib: $(DYN_LIB)

opers: $(OPERS) $(STATIC_LIB)

#boxes: 
#

FORCE:

$(DYN_LIB): $(OBJ)
	$(RM) $@
	$(LD) -o $@ $(LDFLAGSLIB) $(OBJ)
	chmod 755 $@

$(STATIC_LIB): $(OBJ)
	$(RM) $@
	$(AR) $(ARFLAGS) $@ $(OBJ)
	chmod 644 $@

src/objects/%.o: src/objects/%.cpp  include/%.h
	$(CXX) $(CXXFLAGSOBJ) -c -o $@ $< 

%.cpp : %.cct etc/macros/template.pl etc/macros/Macro.pm etc/macros/init.pl etc/macros/pand_macros include/main.h include/pandore.h
	$(PPP) $< > $@ || $(RM) $@

%.h : %.ht etc/macros/template.pl etc/macros/Macro.pm etc/macros/init.pl etc/macros/pand_macros include/main.h include/pandore.h
	$(PPP) $< > $@ || $(RM) $@
clean:
	-$(RM) $(OBJ)
	cd src/viewers/Qt && $(MAKE) clean

cleandist: distclean

distclean: clean
	-$(RM) $(TARGETS)
	-$(RM) -r deps
	-$(RM) pandore
	-$(RM) Makefile
	-$(RM) bin/pdraw
	cd src/viewers/Qt && $(MAKE) distclean
	-$(RM) libpandore.so
	-$(RM) libpandore.a
install:
	@echo "Installation folder: /net/g/msantel/Documents/Outil_imagerie/TD1/baseline/pandore-visu"
	@echo "done".

uninstall:
	@echo "done".

#
# dependencies :
#
src/objects/bundled.o: src/objects/bundled.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h
src/objects/collection.o: src/objects/collection.cpp include/pandore.h \
 include/ptypes.h include/errc.h include/panfile.h include/pobject.h \
 include/dimension.h include/point.h include/neighbours.h include/image.h \
 include/region.h include/graph.h include/plist.h include/promotions.h \
 include/plimits.h include/collection.h include/bundled.h include/main.h
src/objects/errc.o: src/objects/errc.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h
src/objects/graph.o: src/objects/graph.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h
src/objects/main.o: src/objects/main.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h
src/objects/pobject.o: src/objects/pobject.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h
src/objects/region.o: src/objects/region.cpp include/pandore.h include/ptypes.h \
 include/errc.h include/panfile.h include/pobject.h include/dimension.h \
 include/point.h include/neighbours.h include/image.h include/region.h \
 include/graph.h include/plist.h include/promotions.h include/plimits.h \
 include/collection.h include/bundled.h include/main.h

bin/pvisu: FORCE
	cd src/viewers/Qt && $(MAKE)
bin/pdraw: bin/pvisu
	mkdir -p bin
	$(COPY) bin/pvisu bin/pdraw
